/*
* Configuration of module: CanTp
*
* Created by:   parai
* Copyright:    (C)parai@foxmail.com  
*
* Configured for (MCU):    posix
*
* Module vendor:           ArcCore
* Generator version:       01.00
*
* Generated by easySAR Studio (https://github.com/parai/as)
*/
#if defined(USE_CANTP) && !defined(USE_CANTP_MINI)
#include "CanTp.h"
#if defined(USE_CANIF)
#include "CanIf.h"
#endif
#if defined(USE_PDUR)
#include "PduR.h"
#endif

#if defined(__WINDOWS__) || defined(__LINUX__)
#define CANTP_TIMEOUT_UNIT 10
#else
#define CANTP_TIMEOUT_UNIT 1
#endif

static const CanTp_GeneralType CanTpGeneralConfig =
{
    .main_function_period =  10,
};
//NSa TODO:
static const CanTp_NSaType CanTpNSaConfig =
{
    .CanTpNSa =  0,
};

static const CanTp_NTaType CanTpNTaConfig =
{
    .CanTpNTa =  0,
};

#ifndef CANIF_ID_TxDiagP2P
#define CANIF_ID_TxDiagP2P -1
#endif
#ifndef PDUR_ID_RxDiagP2P
#define PDUR_ID_RxDiagP2P -1
#endif
#ifndef CANIF_ID_TxDiagP2P
#define CANIF_ID_TxDiagP2P -1
#endif
#ifndef PDUR_ID2_TxDiagP2P
#define PDUR_ID2_TxDiagP2P -1
#endif
const CanTp_NSduType CanTpNSduConfigList[] =
{

    {
        .direction =  ISO15765_RECEIVE,
        .listItemType =  CANTP_NOT_LAST_ENTRY,
        .configData.CanTpRxNSdu.CanTp_FcPduId =  CANTP_ID_RxDiagP2P,
        .configData.CanTpRxNSdu.CanIf_FcPduId =  CANIF_ID_TxDiagP2P,
        .configData.CanTpRxNSdu.PduR_PduId =  PDUR_ID_RxDiagP2P,
        .configData.CanTpRxNSdu.CanTpAddressingFormant =  CANTP_STANDARD,
        .configData.CanTpRxNSdu.CanTpBs =   8,
        .configData.CanTpRxNSdu.CanTpNar =  (25)*CANTP_TIMEOUT_UNIT,
        .configData.CanTpRxNSdu.CanTpNbr =  (25)*CANTP_TIMEOUT_UNIT,
        .configData.CanTpRxNSdu.CanTpNcr =  (150)*CANTP_TIMEOUT_UNIT,
        .configData.CanTpRxNSdu.CanTpRxChannel =  CANTP_ID_RxDiagP2P,
        .configData.CanTpRxNSdu.CanTpRxDI =  8,
        .configData.CanTpRxNSdu.CanTpRxPaddingActivation =  CANTP_ON,
        .configData.CanTpRxNSdu.CanTpRxTaType =  CANTP_PHYSICAL,
        .configData.CanTpRxNSdu.CanTpWftMax =  10,
        .configData.CanTpRxNSdu.CanTpSTmin  =  1,
        .configData.CanTpRxNSdu.CanTpNSa =  &CanTpNSaConfig,
        .configData.CanTpRxNSdu.CanTpNTa =  &CanTpNTaConfig,
        .configData.CanTpRxNSdu.ll_dl =  64,
    },

    {
        .direction =  IS015765_TRANSMIT,
        .listItemType =  CANTP_NOT_LAST_ENTRY,
        .configData.CanTpTxNSdu.CanTp_FcPduId =  CANTP_ID_RxDiagP2P,
        .configData.CanTpTxNSdu.CanIf_PduId   =  CANIF_ID_TxDiagP2P,
        .configData.CanTpTxNSdu.PduR_PduId =  PDUR_ID2_TxDiagP2P,
        .configData.CanTpTxNSdu.CanTpAddressingMode =  CANTP_STANDARD,
        .configData.CanTpTxNSdu.CanTpNas =  (25)*CANTP_TIMEOUT_UNIT,
        .configData.CanTpTxNSdu.CanTpNbs =  (250)*CANTP_TIMEOUT_UNIT,
        .configData.CanTpTxNSdu.CanTpNcs =  (25)*CANTP_TIMEOUT_UNIT,
        .configData.CanTpTxNSdu.CanTpTxChannel =  CANTP_ID_TxDiagP2P,
        .configData.CanTpTxNSdu.CanTpTxDI =  8,
        .configData.CanTpTxNSdu.CanTpTxPaddingActivation =  CANTP_ON,
        .configData.CanTpTxNSdu.CanTpTxTaType =  CANTP_PHYSICAL,
        .configData.CanTpTxNSdu.CanTpNSa =  &CanTpNSaConfig,
        .configData.CanTpTxNSdu.CanTpNTa =  &CanTpNTaConfig,
        .configData.CanTpTxNSdu.ll_dl =  64,
    },
};

const CanTp_RxIdType CanTp_RxIdList[] = 
{

    {
        .CanTpAddressingMode =  CANTP_STANDARD,
        .CanTpNSduIndex =  CANTP_ID_RxDiagP2P,
        .CanTpReferringTxIndex =  CANTP_ID_TxDiagP2P,
    },

    {
        .CanTpAddressingMode =  CANTP_STANDARD,
        .CanTpNSduIndex =  CANTP_ID_TxDiagP2P,
        .CanTpReferringTxIndex =  CANTP_ID_RxDiagP2P,
    },
};

const CanTp_ConfigType CanTpConfig =
{
    .CanTpGeneral     =      &CanTpGeneralConfig,
    .CanTpNSduList =     CanTpNSduConfigList,
    .CanTpRxIdList =    CanTp_RxIdList
};

#endif /* USE_CANTP */
