/*
* Configuration of module: Dcm
*
* Created by:   parai
* Copyright:    (C)parai@foxmail.com  
*
* Configured for (MCU):    posix
*
* Module vendor:           ArcCore
* Generator version:       01.00
*
* Generated by easySAR Studio (https://github.com/parai/as)
*/
#if defined(USE_DCM) && !defined(USE_DCM_MINI)
#include "Std_Types.h"
#include "Dcm.h"
#include "Dcm_Internal.h"
#if defined(USE_PDUR)
#include "PduR.h"
#endif

#define INDEX_OF_SECURITY_PRGS                             0
#define INDEX_OF_SECURITY_EXTDS                            1
#define INDEX_OF_SECURITY_Default                          2
#define DCM_SECURITY_EOL_INDEX 3

#define INDEX_OF_SESSION_DS                               0
#define INDEX_OF_SESSION_PRGS                             1
#define INDEX_OF_SESSION_EXTDS                            2
#define DCM_SESSION_EOL_INDEX 3

#define DCM_DID_LIST_EOL_INDEX 0

#define INDEX_OF_RCINFO_RoutineInfo_EraseFlash           0
#define INDEX_OF_RCINFO_RoutineInfo_TestJumpToApplication 1

#define INDEX_OF_BUF_Buffer1                          0
#define INDEX_OF_BUF_Buffer2                          1

#define INDEX_OF_TL_Timing1                          0

#define INDEX_OF_ST_ServiceTable1                    0

/* --------------------------------------------------------- */

extern Std_ReturnType BL_GetProgramSessionSeed (uint8 *securityAccessDataRecord, uint8 *seed, Dcm_NegativeResponseCodeType *errorCode);
extern Std_ReturnType BL_CompareProgramSessionKey (uint8 *key);
extern Std_ReturnType BL_GetExtendedSessionSeed (uint8 *securityAccessDataRecord, uint8 *seed, Dcm_NegativeResponseCodeType *errorCode);
extern Std_ReturnType BL_CompareExtendedSessionKey (uint8 *key);
extern Std_ReturnType BL_StartProtocolCbk (Dcm_ProtocolType protocolID);
extern Std_ReturnType BL_StopProtocolCbk (Dcm_ProtocolType protocolID);
extern Std_ReturnType BL_ProtocolIndicationCbk(uint8 *requestData, uint16 dataSize);

extern Std_ReturnType BL_GetSessionChangePermission(Dcm_SesCtrlType sesCtrlTypeActive, Dcm_SesCtrlType sesCtrlTypeNew);
extern Std_ReturnType BL_StartEraseFlash(uint8 *inBuffer, uint8 *outBuffer, Dcm_NegativeResponseCodeType *errorCode);
extern Std_ReturnType BL_TestJumpToApplicatin(uint8 *inBuffer, uint8 *outBuffer, Dcm_NegativeResponseCodeType *errorCode);
static const Dcm_DspSecurityRowType DspSecurityList[] = {
	{ // PRGS
		.DspSecurityLevel =  2,
		.DspSecurityDelayTimeOnBoot =  0,/* Value is not configurable */
		.DspSecurityNumAttDelay =  0,     /* Value is not configurable */
		.DspSecurityDelayTime =  0,     /* Value is not configurable */
		.DspSecurityNumAttLock =  0,     /* Value is not configurable */
		.DspSecurityADRSize =  0, // TODO:
		.DspSecuritySeedSize =  4,
		.DspSecurityKeySize =  4,
		.GetSeed =  BL_GetProgramSessionSeed,
		.CompareKey =  BL_CompareProgramSessionKey,
		.Arc_EOL =  FALSE
	},
	{ // EXTDS
		.DspSecurityLevel =  1,
		.DspSecurityDelayTimeOnBoot =  0,/* Value is not configurable */
		.DspSecurityNumAttDelay =  0,     /* Value is not configurable */
		.DspSecurityDelayTime =  0,     /* Value is not configurable */
		.DspSecurityNumAttLock =  0,     /* Value is not configurable */
		.DspSecurityADRSize =  0, // TODO:
		.DspSecuritySeedSize =  4,
		.DspSecurityKeySize =  4,
		.GetSeed =  BL_GetExtendedSessionSeed,
		.CompareKey =  BL_CompareExtendedSessionKey,
		.Arc_EOL =  FALSE
	},
	{ // Default
		.DspSecurityLevel =  0,
		.DspSecurityDelayTimeOnBoot =  0,/* Value is not configurable */
		.DspSecurityNumAttDelay =  0,     /* Value is not configurable */
		.DspSecurityDelayTime =  0,     /* Value is not configurable */
		.DspSecurityNumAttLock =  0,     /* Value is not configurable */
		.DspSecurityADRSize =  0, // TODO:
		.DspSecuritySeedSize =  4,
		.DspSecurityKeySize =  4,
		.GetSeed =  NULL,
		.CompareKey =  NULL,
		.Arc_EOL =  FALSE
	},
	{ 
		.Arc_EOL = TRUE
	}
};

static const Dcm_DspSecurityType DspSecurity = {
    .DspSecurityRow = DspSecurityList
};

static const Dcm_DspSessionRowType DspSessionList[] = {
	{ //DS
		.DspSessionLevel = 1,
		.DspSessionP2ServerMax = 100,
		.DspSessionP2StarServerMax =  100,
		.Arc_EOL =  FALSE
	},
	{ //PRGS
		.DspSessionLevel = 2,
		.DspSessionP2ServerMax = 100,
		.DspSessionP2StarServerMax =  100,
		.Arc_EOL =  FALSE
	},
	{ //EXTDS
		.DspSessionLevel = 3,
		.DspSessionP2ServerMax = 100,
		.DspSessionP2StarServerMax =  100,
		.Arc_EOL =  FALSE
	},
	{ 
		.Arc_EOL = TRUE
	},
};

static const Dcm_DspSessionType DspSession = {
    .DspSessionRow = DspSessionList,
};

const Dcm_DspSecurityRowType *SecurityList_Default_EXTDS_PRGS[] = {
	&DspSecurityList[INDEX_OF_SECURITY_Default],
	&DspSecurityList[INDEX_OF_SECURITY_EXTDS],
	&DspSecurityList[INDEX_OF_SECURITY_PRGS],
	&DspSecurityList[DCM_SECURITY_EOL_INDEX]
};
const Dcm_DspSecurityRowType *SecurityList_EXTDS_PRGS[] = {
	&DspSecurityList[INDEX_OF_SECURITY_EXTDS],
	&DspSecurityList[INDEX_OF_SECURITY_PRGS],
	&DspSecurityList[DCM_SECURITY_EOL_INDEX]
};
const Dcm_DspSecurityRowType *SecurityList_PRGS[] = {
	&DspSecurityList[INDEX_OF_SECURITY_PRGS],
	&DspSecurityList[DCM_SECURITY_EOL_INDEX]
};
static const Dcm_DspSessionRowType *SessionList_DS_EXTDS_PRGS[] = {
	&DspSessionList[INDEX_OF_SESSION_DS],
	&DspSessionList[INDEX_OF_SESSION_EXTDS],
	&DspSessionList[INDEX_OF_SESSION_PRGS],
	&DspSessionList[DCM_SECURITY_EOL_INDEX]
};
static const Dcm_DspSessionRowType *SessionList_EXTDS_PRGS[] = {
	&DspSessionList[INDEX_OF_SESSION_EXTDS],
	&DspSessionList[INDEX_OF_SESSION_PRGS],
	&DspSessionList[DCM_SECURITY_EOL_INDEX]
};
static const Dcm_DspSessionRowType *SessionList_PRGS[] = {
	&DspSessionList[INDEX_OF_SESSION_PRGS],
	&DspSessionList[DCM_SECURITY_EOL_INDEX]
};

static const Dcm_DspDidInfoType DspDidInfoList[] = {
};

extern const Dcm_DspDidType DspDidList[];
const Dcm_DspDidType DspDidList[] = { 
	{ 		.Arc_EOL =  TRUE
	}
};

/************************************************************************
*                            Routine control                                *
************************************************************************/

static const Dcm_DspStartRoutineType RoutineInfo_EraseFlash_start = {
    .DspStartRoutineCtrlOptRecSize = 9,
    .DspStartRoutineStsOptRecSize =  0
};
static const Dcm_DspRoutineStopType RoutineInfo_EraseFlash_stop = {
    .DspStopRoutineCtrlOptRecSize = 9,
    .DspStopRoutineStsOptRecSize = 0,
};
static const Dcm_DspStartRoutineType RoutineInfo_TestJumpToApplication_start = {
    .DspStartRoutineCtrlOptRecSize = 0,
    .DspStartRoutineStsOptRecSize =  0
};
static const Dcm_DspRoutineStopType RoutineInfo_TestJumpToApplication_stop = {
    .DspStopRoutineCtrlOptRecSize = 0,
    .DspStopRoutineStsOptRecSize = 0,
};
static const Dcm_DspRoutineInfoType DspRoutineInfoList[] = {
	{//RoutineInfo_EraseFlash
		.DspRoutineAuthorization={
			.DspRoutineSessionRef =  SessionList_PRGS,
			.DspRoutineSecurityLevelRef = SecurityList_PRGS,
		},
		.DspStartRoutine = &RoutineInfo_EraseFlash_start,
		.DspRoutineStop =  NULL,
		.DspRoutineRequestRes =  NULL
	},
	{//RoutineInfo_TestJumpToApplication
		.DspRoutineAuthorization={
			.DspRoutineSessionRef =  SessionList_PRGS,
			.DspRoutineSecurityLevelRef = SecurityList_PRGS,
		},
		.DspStartRoutine = &RoutineInfo_TestJumpToApplication_start,
		.DspRoutineStop =  NULL,
		.DspRoutineRequestRes =  NULL
	},
};

static const Dcm_DspRoutineType  DspRoutineList[] = {
	{//EraseFlash
		.DspRoutineUsePort = FALSE,
		.DspRoutineIdentifier = 0xFF01,
		.DspRoutineInfoRef = &DspRoutineInfoList[INDEX_OF_RCINFO_RoutineInfo_EraseFlash],
		.DspStartRoutineFnc = BL_StartEraseFlash,
		.DspStopRoutineFnc =  NULL,
		.DspRequestResultRoutineFnc =  NULL,
		.Arc_EOL = FALSE
	},
	{//TestJumpToApplication
		.DspRoutineUsePort = FALSE,
		.DspRoutineIdentifier = 0xFF03,
		.DspRoutineInfoRef = &DspRoutineInfoList[INDEX_OF_RCINFO_RoutineInfo_TestJumpToApplication],
		.DspStartRoutineFnc = BL_TestJumpToApplicatin,
		.DspStopRoutineFnc =  NULL,
		.DspRequestResultRoutineFnc =  NULL,
		.Arc_EOL = FALSE
	},
	{
		.Arc_EOL = TRUE
	}
};

/************************************************************************
*                            Memory Info                                 *
************************************************************************/

static Dcm_DspMemoryRangeInfo pReadMemoryInfo_Flash[] = 
{
	{ /* Bootloader */
		.MemoryAddressHigh = 0x00010000,
		.MemoryAddressLow  = 0x00000000,
		.pSecurityLevel  = SecurityList_PRGS,
		.Arc_EOL = FALSE
	},
	{ /* Application */
		.MemoryAddressHigh = 0x00040000,
		.MemoryAddressLow  = 0x00010000,
		.pSecurityLevel  = SecurityList_PRGS,
		.Arc_EOL = FALSE
	},
	{ /* AppBcm2835 */
		.MemoryAddressHigh = 0x08000000,
		.MemoryAddressLow  = 0x00040000,
		.pSecurityLevel  = SecurityList_PRGS,
		.Arc_EOL = FALSE
	},
	{ /* MPC56xx */
		.MemoryAddressHigh = 0x00180000,
		.MemoryAddressLow  = 0x00020000,
		.pSecurityLevel  = SecurityList_PRGS,
		.Arc_EOL = FALSE
	},
	{
		.Arc_EOL = TRUE
	},
};
static Dcm_DspMemoryRangeInfo pWriteMemoryInfo_Flash[] = 
{
	{ /* Bootloader */
		.MemoryAddressHigh = 0x00010000,
		.MemoryAddressLow  = 0x00000000,
		.pSecurityLevel  = SecurityList_PRGS,
		.Arc_EOL = FALSE
	},
	{ /* Application */
		.MemoryAddressHigh = 0x00040000,
		.MemoryAddressLow  = 0x00010000,
		.pSecurityLevel  = SecurityList_PRGS,
		.Arc_EOL = FALSE
	},
	{ /* AppBcm2835 */
		.MemoryAddressHigh = 0x08000000,
		.MemoryAddressLow  = 0x00040000,
		.pSecurityLevel  = SecurityList_PRGS,
		.Arc_EOL = FALSE
	},
	{ /* MPC56xx */
		.MemoryAddressHigh = 0x00180000,
		.MemoryAddressLow  = 0x00020000,
		.pSecurityLevel  = SecurityList_PRGS,
		.Arc_EOL = FALSE
	},
	{
		.Arc_EOL = TRUE
	},
};
static Dcm_DspMemoryRangeInfo pReadMemoryInfo_Eeprom[] = 
{
	{ /* Bootloader */
		.MemoryAddressHigh = 256,
		.MemoryAddressLow  = 0,
		.pSecurityLevel  = SecurityList_PRGS,
		.Arc_EOL = FALSE
	},
	{ /* Application */
		.MemoryAddressHigh = 4096,
		.MemoryAddressLow  = 256,
		.pSecurityLevel  = SecurityList_PRGS,
		.Arc_EOL = FALSE
	},
	{
		.Arc_EOL = TRUE
	},
};
static Dcm_DspMemoryRangeInfo pWriteMemoryInfo_Eeprom[] = 
{
	{ /* Bootloader */
		.MemoryAddressHigh = 256,
		.MemoryAddressLow  = 0,
		.pSecurityLevel  = SecurityList_PRGS,
		.Arc_EOL = FALSE
	},
	{ /* Application */
		.MemoryAddressHigh = 4096,
		.MemoryAddressLow  = 256,
		.pSecurityLevel  = SecurityList_PRGS,
		.Arc_EOL = FALSE
	},
	{
		.Arc_EOL = TRUE
	},
};
static Dcm_DspMemoryRangeInfo pReadMemoryInfo_FlashDriver[] = 
{
	{ /* FlashDriver */
		.MemoryAddressHigh = 4096,
		.MemoryAddressLow  = 0,
		.pSecurityLevel  = SecurityList_PRGS,
		.Arc_EOL = FALSE
	},
	{
		.Arc_EOL = TRUE
	},
};
static Dcm_DspMemoryRangeInfo pWriteMemoryInfo_FlashDriver[] = 
{
	{ /* FlashDriver */
		.MemoryAddressHigh = 4096,
		.MemoryAddressLow  = 0,
		.pSecurityLevel  = SecurityList_PRGS,
		.Arc_EOL = FALSE
	},
	{
		.Arc_EOL = TRUE
	},
};
static const Dcm_DspMemoryIdInfo DspMemoryIdInfo[] = 
{
	{ /* Flash */
		.MemoryIdValue = 0xFF,
		.pReadMemoryInfo = pReadMemoryInfo_Flash,
		.pWriteMemoryInfo = pWriteMemoryInfo_Flash,
		.Arc_EOL = FALSE
	},
	{ /* Eeprom */
		.MemoryIdValue = 0xEE,
		.pReadMemoryInfo = pReadMemoryInfo_Eeprom,
		.pWriteMemoryInfo = pWriteMemoryInfo_Eeprom,
		.Arc_EOL = FALSE
	},
	{ /* FlashDriver */
		.MemoryIdValue = 0xFD,
		.pReadMemoryInfo = pReadMemoryInfo_FlashDriver,
		.pWriteMemoryInfo = pWriteMemoryInfo_FlashDriver,
		.Arc_EOL = FALSE
	},
	{
		.Arc_EOL = TRUE,
	},
};
static Dcm_DspMemoryType DspMemory = 
{
		.DcmDspUseMemoryId = TRUE, /* parai: always use ID */
		.DspMemoryIdInfo = DspMemoryIdInfo
};

static const Dcm_DspType Dsp = {
    .DspMaxDidToRead =  0xDB, // TODO
    .DspDid =  DspDidList,
    .DspDidInfo = DspDidInfoList,
    .DspEcuReset = NULL,
    .DspPid =  NULL,
    .DspReadDTC =  NULL,
    .DspRequestControl =  NULL,
    .DspRoutine = DspRoutineList,
    .DspRoutineInfo = DspRoutineInfoList,
    .DspSecurity =  &DspSecurity,
    .DspSession =  &DspSession,
    .DspTestResultByObdmid =  NULL,
    .DspVehInfo = NULL,
    .DspMemory = &DspMemory
};

/************************************************************************
*                                    DSD                                    *
************************************************************************/

static const Dcm_DsdServiceType ServiceTable1_serviceList[] = {
	{ 
		.DsdSidTabServiceId = SID_DIAGNOSTIC_SESSION_CONTROL,
		.DsdSidTabSubfuncAvail = TRUE,
		.DsdSidTabSecurityLevelRef = SecurityList_Default_EXTDS_PRGS,
		.DsdSidTabSessionLevelRef = SessionList_DS_EXTDS_PRGS,
		.Arc_EOL = FALSE
	},
	{ 
		.DsdSidTabServiceId = SID_SECURITY_ACCESS,
		.DsdSidTabSubfuncAvail = TRUE,
		.DsdSidTabSecurityLevelRef = SecurityList_Default_EXTDS_PRGS,
		.DsdSidTabSessionLevelRef = SessionList_EXTDS_PRGS,
		.Arc_EOL = FALSE
	},
	{ 
		.DsdSidTabServiceId = SID_TESTER_PRESENT,
		.DsdSidTabSubfuncAvail = TRUE,
		.DsdSidTabSecurityLevelRef = SecurityList_EXTDS_PRGS,
		.DsdSidTabSessionLevelRef = SessionList_EXTDS_PRGS,
		.Arc_EOL = FALSE
	},
	{ 
		.DsdSidTabServiceId = SID_ROUTINE_CONTROL,
		.DsdSidTabSubfuncAvail = TRUE,
		.DsdSidTabSecurityLevelRef = SecurityList_EXTDS_PRGS,
		.DsdSidTabSessionLevelRef = SessionList_EXTDS_PRGS,
		.Arc_EOL = FALSE
	},
	{ 
		.DsdSidTabServiceId = SID_ECU_RESET,
		.DsdSidTabSubfuncAvail = TRUE,
		.DsdSidTabSecurityLevelRef = SecurityList_EXTDS_PRGS,
		.DsdSidTabSessionLevelRef = SessionList_EXTDS_PRGS,
		.Arc_EOL = FALSE
	},
	{ 
		.DsdSidTabServiceId = SID_REQUEST_DOWNLOAD,
		.DsdSidTabSubfuncAvail = FALSE,
		.DsdSidTabSecurityLevelRef = SecurityList_PRGS,
		.DsdSidTabSessionLevelRef = SessionList_PRGS,
		.Arc_EOL = FALSE
	},
	{ 
		.DsdSidTabServiceId = SID_REQUEST_UPLOAD,
		.DsdSidTabSubfuncAvail = FALSE,
		.DsdSidTabSecurityLevelRef = SecurityList_PRGS,
		.DsdSidTabSessionLevelRef = SessionList_PRGS,
		.Arc_EOL = FALSE
	},
	{ 
		.DsdSidTabServiceId = SID_TRANSFER_DATA,
		.DsdSidTabSubfuncAvail = FALSE,
		.DsdSidTabSecurityLevelRef = SecurityList_PRGS,
		.DsdSidTabSessionLevelRef = SessionList_PRGS,
		.Arc_EOL = FALSE
	},
	{ 
		.DsdSidTabServiceId = SID_REQUEST_TRANSFER_EXIT,
		.DsdSidTabSubfuncAvail = FALSE,
		.DsdSidTabSecurityLevelRef = SecurityList_PRGS,
		.DsdSidTabSessionLevelRef = SessionList_PRGS,
		.Arc_EOL = FALSE
	},
	{ 
		.Arc_EOL = TRUE
	}
};

static const Dcm_DsdServiceTableType DsdServiceTable[] = {    
	{ // ServiceTable1
		.DsdSidTabId = 0,
		.DsdService = ServiceTable1_serviceList,
		.Arc_EOL = FALSE
	},
	{ 
		.Arc_EOL = TRUE
	}
};

static const Dcm_DsdType Dsd = {
    .DsdServiceTable = DsdServiceTable
};

/************************************************************************
*                                    DSL                                    *
************************************************************************/

static uint8 Buffer1[4095];
Dcm_DslBufferRuntimeType rxBufferParams_Buffer1 =
{
    .status =  NOT_IN_USE
};
static uint8 Buffer2[4095];
Dcm_DslBufferRuntimeType rxBufferParams_Buffer2 =
{
    .status =  NOT_IN_USE
};
static const Dcm_DslBufferType DcmDslBufferList[DCM_DSL_BUFFER_LIST_LENGTH] = {
	{
		.DslBufferID =  0,// TODO
		.DslBufferSize = 4095,/* ?Value is not configurable */
		.pduInfo={
			.SduDataPtr = Buffer1,
			.SduLength =  4095,
		},
		.externalBufferRuntimeData = &rxBufferParams_Buffer1
	},
	{
		.DslBufferID =  1,// TODO
		.DslBufferSize = 4095,/* ?Value is not configurable */
		.pduInfo={
			.SduDataPtr = Buffer2,
			.SduLength =  4095,
		},
		.externalBufferRuntimeData = &rxBufferParams_Buffer2
	},
};

static const Dcm_DslCallbackDCMRequestServiceType DCMRequestServiceList[] = {
	{ // RequestService1
		.StartProtocol = BL_StartProtocolCbk,
		.StopProtocol = BL_StopProtocolCbk,
		.Arc_EOL = FALSE
	},
	{
		.Arc_EOL = TRUE
	}
};

static const Dcm_DslServiceRequestIndicationType DCMServiceRequestIndicationList[] = {
	{ // RequestService1
		.Indication =  BL_ProtocolIndicationCbk,
		.Arc_EOL =  FALSE
	},
	{ 
		.Arc_EOL = TRUE
	}
};

extern const Dcm_DslMainConnectionType DslMainConnectionList[];

static const Dcm_DslProtocolRxType DcmDslProtocolRxList[] = {
	{// P2P->Connection1->RxChannel1
		.DslMainConnectionParent =  &DslMainConnectionList[0],
		.DslProtocolAddrType = DCM_PROTOCOL_PHYSICAL_ADDR_TYPE,
		.DcmDslProtocolRxPduId = PDUR_ID_RxDiagP2P,
		.DcmDslProtocolRxTesterSourceAddr_v4 =  0,       /* Value is not configurable */
		.DcmDslProtocolRxChannelId_v4 =  0,                /* Value is not configurable */
		.Arc_EOL =  FALSE
	},
	{
		.Arc_EOL = TRUE
	}
};

static const Dcm_DslProtocolTxType DcmDslProtocolTxList[] = {
	{// P2P->Connection1->TxChannel2
		.DslMainConnectionParent =  &DslMainConnectionList[0],
		.DcmDslProtocolTxPduId =  PDUR_ID_TxDiagP2P,
		.DcmDslProtocolDcmTxPduId =  DCM_ID_TxDiagP2P,
		.Arc_EOL =  FALSE
	},
	{
		.Arc_EOL = TRUE
	}
};

extern const Dcm_DslConnectionType DslConnectionList[];

const Dcm_DslMainConnectionType DslMainConnectionList[] = {
	{//P2P->Connection1
		.DslConnectionParent =  &DslConnectionList[0],
		.DslPeriodicTransmissionConRef =  NULL,        /* Value is not configurable */
		.DslROEConnectionRef =  NULL,                /* Value is not configurable */
		.DslProtocolRx =  NULL,                        /* Value is not configurable */
		.DslProtocolTx =  &DcmDslProtocolTxList[0],
	},
};

extern const Dcm_DslProtocolRowType DslProtocolRowList[];

const Dcm_DslConnectionType DslConnectionList[] = {
	{//P2P->Connection1
		.DslProtocolRow = &DslProtocolRowList[0],
		.DslMainConnection = &DslMainConnectionList[0],
		.DslPeriodicTransmission = NULL,    /* Value is not configurable */
		.DslResponseOnEvent = NULL,    /* Value is not configurable */
		.Arc_EOL =  FALSE
	},
	{
		.Arc_EOL = TRUE
	}
};

extern const Dcm_DslProtocolTimingRowType ProtocolTimingList[];

static Dcm_DslRunTimeProtocolParametersType dcmDslRuntimeVariables[1];
const Dcm_DslProtocolRowType DslProtocolRowList[]= {
	{//P2P
		.DslProtocolID = DCM_UDS_ON_CAN,
		.DslProtocolIsParallelExecutab = FALSE, // not supported
		.DslProtocolPreemptTimeout = 0,    // not supported
		.DslProtocolPriority = 0,    // not supported
		.DslProtocolTransType = DCM_PROTOCOL_TRANS_TYPE_1,
		.DslProtocolRxBufferID = &DcmDslBufferList[INDEX_OF_BUF_Buffer1],
		.DslProtocolTxBufferID = &DcmDslBufferList[INDEX_OF_BUF_Buffer2],
		.DslProtocolSIDTable = &DsdServiceTable[INDEX_OF_ST_ServiceTable1],
		.DslProtocolTimeLimit = &ProtocolTimingList[INDEX_OF_TL_Timing1],
		.DslConnection =  DslConnectionList,
		.DslRunTimeProtocolParameters = &dcmDslRuntimeVariables[0],
		.Arc_EOL = FALSE
	},
	{
		.Arc_EOL = TRUE
	}
};

static const Dcm_DslProtocolType DslProtocol = {
    .DslProtocolRxGlobalList = DcmDslProtocolRxList,
    .DslProtocolTxGlobalList = DcmDslProtocolTxList,
    .DslProtocolRowList = DslProtocolRowList
};

const Dcm_DslProtocolTimingRowType ProtocolTimingList[] = {
	{//Timing1
		.TimStrP2ServerMax = 100,
		.TimStrP2ServerMin = 20,
		.TimStrP2StarServerMax = 0,        /* Value is not configurable */
		.TimStrP2StarServerMin = 0,        /* Value is not configurable */
		.TimStrS3Server = 5000,
		.Arc_EOL = FALSE
	},
	{
		.Arc_EOL =  TRUE
	},
};

static const Dcm_DslProtocolTimingType ProtocolTiming = {
    .DslProtocolTimingRow = ProtocolTimingList
};

static const Dcm_DslSessionControlType SessionControlList[] = {
	{//SessionControl
		.GetSesChgPermission = BL_GetSessionChangePermission,
		.ChangeIndication = NULL,
		.ConfirmationRespPend = NULL,
		.Arc_EOL = FALSE
	},
	{
		.Arc_EOL = TRUE
	}
};

static const Dcm_DslDiagRespType DiagResp = {
    .DslDiagRespForceRespPendEn = TRUE,
    .DslDiagRespMaxNumRespPend =  100  /* if P2Server=100ms, so 10s totally */
};

static const Dcm_DslType Dsl = {
    .DslBuffer =  DcmDslBufferList,
    .DslCallbackDCMRequestService = DCMRequestServiceList,
    .DslDiagResp = &DiagResp,
    .DslProtocol =  &DslProtocol,
    .DslProtocolTiming = &ProtocolTiming,
    .DslServiceRequestIndication = DCMServiceRequestIndicationList,
    .DslSessionControl = SessionControlList
};

const Dcm_ConfigType DCM_Config = {
    .Dsp = &Dsp,
    .Dsd = &Dsd,
    .Dsl = &Dsl
};
#endif /* USE_DCM */
